<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Vampir Köylü Oyunu</title>
  <style>
    body {
      background-color: #111;
      color: white;
      font-family: 'Segoe UI', sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 40px;
      position: relative;
      overflow: hidden;
      transition: background-color 0.5s ease;
    }

    #backgroundRole {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 10vw;
      font-weight: 900;
      color: rgba(255, 255, 255, 0.1);
      user-select: none;
      pointer-events: none;
      z-index: 0;
      white-space: nowrap;
      font-family: 'Segoe UI', sans-serif;
    }

    /* Yeni footer stili */
    #footerSignature {
      position: fixed;
      bottom: 10px;
      left: 10px;
      font-size: 1rem;
      font-weight: bold;
      color: white;
      font-family: 'Segoe UI', sans-serif;
      z-index: 20;
      user-select: none;
      pointer-events: none;
      transition: color 0.5s ease;
    }

    h1 {
      color: crimson;
      margin-bottom: 20px;
      position: relative;
      z-index: 10;
    }

    .settings,
    .role-display {
      background-color: #1e1e1e;
      padding: 20px;
      border-radius: 10px;
      margin-bottom: 20px;
      width: 300px;
      text-align: center;
      position: relative;
      z-index: 10;
    }

    label {
      display: block;
      margin: 10px 0 5px;
    }

    input[type='number'] {
      width: 100%;
      padding: 5px;
      border-radius: 5px;
      border: none;
      margin-bottom: 10px;
    }

    button {
      width: 100%;
      padding: 10px;
      background-color: crimson;
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 16px;
      cursor: pointer;
      transition: background 0.3s;
      position: relative;
      z-index: 10;
    }

    button:hover {
      background-color: darkred;
    }

    .role-display p {
      font-size: 1.5rem;
      margin-top: 15px;
      opacity: 0;
      transition: opacity 0.3s ease;
      height: 2em;
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
      z-index: 10;
    }

    .fade-in {
      opacity: 1 !important;
    }

    .fade-out {
      opacity: 0 !important;
    }

    @keyframes pulse {
      0% {
        transform: scale(1);
      }
      50% {
        transform: scale(1.1);
      }
      100% {
        transform: scale(1);
      }
    }

    .pulse-animation {
      animation: pulse 0.4s ease;
    }
  </style>
</head>
<body>
  <div id="backgroundRole"></div>

  <h1>Vampir Köylü</h1>

  <div class="settings">
    <label for="players">Toplam Oyuncu Sayısı:</label>
    <input type="number" id="players" min="3" value="6" />

    <label for="vampires">Vampir Sayısı:</label>
    <input type="number" id="vampires" min="1" value="2" />

    <label for="doctors">Doktor Sayısı:</label>
    <input type="number" id="doctors" min="0" value="1" />

    <button onclick="startGame()">Oyunu Başlat</button>
  </div>

  <div class="role-display" style="display:none;">
    <button onclick="showNextRole()">Rol Göster</button>
    <p id="roleText"></p>
  </div>

  <!-- Sol altta footer yazısı -->
  <div id="footerSignature">Emir Ünlütürk Yapım</div>

  <script>
    let roles = [];
    let currentIndex = 0;
    let timeoutId;

    function setBackgroundRole(role) {
      const bg = document.getElementById('backgroundRole');
      const body = document.body;
      const footer = document.getElementById('footerSignature');

      if (role.includes('Vampir')) {
        body.style.backgroundColor = '#8B0000';  // Koyu kırmızı
        bg.textContent = 'VAMPİR';
        footer.style.color = '#ff9999'; // Açık kırmızı
      } else if (role.includes('Doktor')) {
        body.style.backgroundColor = '#003366';  // Koyu mavi
        bg.textContent = 'DOKTOR';
        footer.style.color = '#99ccff'; // Açık mavi
      } else if (role.includes('Köylü')) {
        body.style.backgroundColor = '#654321';  // Kahverengi ton
        bg.textContent = 'KÖYLÜ';
        footer.style.color = '#d2b48c'; // Açık kahverengi / ten rengi gibi
      } else {
        body.style.backgroundColor = '#111'; // Normal
        bg.textContent = '';
        footer.style.color = 'white';
      }
    }

    function startGame() {
      clearTimeout(timeoutId);
      const total = parseInt(document.getElementById('players').value);
      const vampCount = parseInt(document.getElementById('vampires').value);
      const docCount = parseInt(document.getElementById('doctors').value);

      if (vampCount + docCount > total) {
        alert("Vampir + Doktor sayısı toplam oyuncudan fazla olamaz!");
        return;
      }

      roles = [];
      for (let i = 0; i < vampCount; i++) roles.push("🧛 Vampir");
      for (let i = 0; i < docCount; i++) roles.push("💉 Doktor");
      for (let i = roles.length; i < total; i++) roles.push("👨‍🌾 Köylü");

      roles.sort(() => Math.random() - 0.5);
      currentIndex = 0;

      document.querySelector(".role-display").style.display = "block";
      const roleText = document.getElementById("roleText");
      roleText.textContent = "";
      roleText.classList.remove("fade-in", "fade-out", "pulse-animation");

      setBackgroundRole("");
    }

    function showNextRole() {
      const roleText = document.getElementById("roleText");

      if (currentIndex >= roles.length) {
        roleText.textContent = "Tüm roller gösterildi!";
        roleText.classList.remove("fade-in");
        roleText.classList.add("fade-in");
        setBackgroundRole("");
        return;
      }

      clearTimeout(timeoutId);

      const currentRole = roles[currentIndex];
      roleText.textContent = `Senin Rolün: ${currentRole}`;
      roleText.classList.remove("fade-out");
      void roleText.offsetWidth; // restart animation
      roleText.classList.add("fade-in");

      // Pulse animasyonu
      roleText.classList.add("pulse-animation");
      roleText.addEventListener(
        "animationend",
        () => {
          roleText.classList.remove("pulse-animation");
        },
        { once: true }
      );

      setBackgroundRole(currentRole);

      currentIndex++;

      timeoutId = setTimeout(() => {
        roleText.classList.remove("fade-in");
        roleText.classList.add("fade-out");
        setBackgroundRole(""); // 1 saniye sonra normale dönsün
        setTimeout(() => {
          roleText.textContent = "";
          roleText.classList.remove("fade-out");
        }, 300);
      }, 1000);
    }
  </script>
</body>
</html>
